<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <title>Java from a Parallel Universe</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="../../-revealjs-3.8.0/css/reveal.css">
  <style>
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <link rel="stylesheet" href="../../-revealjs-3.8.0/css/theme/moon.css" id="theme">
  <link rel="stylesheet" href="../parallel-highlight.css"/>
  <link rel="stylesheet" href="../theme-modifications.css"/>
  <!-- Printing and PDF exports -->
  <script>
    var link = document.createElement( 'link' );
    link.rel = 'stylesheet';
    link.type = 'text/css';
    link.href = window.location.search.match( /print-pdf/gi ) ? '../../-revealjs-3.8.0/css/print/pdf.css' : '../../-revealjs-3.8.0/css/print/paper.css';
    document.getElementsByTagName( 'head' )[0].appendChild( link );
  </script>
  <!--[if lt IE 9]>
  <script src="../../-revealjs-3.8.0/lib/js/html5shiv.js"></script>
  <![endif]-->
</head>
<body>
  <div class="reveal">
    <div class="slides">


<section><section id="section" class="title-slide slide level1" data-background-image="../images/jfall2019-background.png"><h1></h1><div style="float:left;font-family:TilburgSans">
<p><img data-src="../images/jfall2019-logo.png" style="height:200px;" /> <br/> #jfall <br/> #paralleljava</p>
</div>
<div style="font-family:TilburgSans;font-size:3em;">
<p>Java from a Parallel Universe</p>
</div></section><section id="jan-ouwens" class="slide level2">
<h2>Jan Ouwens</h2>
<p><br/><br/><br/><br/></p>
<p><img data-src="../images/codestar-by-ordina.png" style="height:40px;margin-top:15px;" /> | <a href="https://jqno.nl/equalsverifier">EqualsVerifier</a></p>
<p><img data-src="../images/twitter.png" /> <a href="https://twitter.com/jqno">jqno</a> | <a href="https://jqno.nl">jqno.nl</a></p>
<p><br/></p>
<div style="font-family:TilburgsAns;">
<p>#jfall    #paralleljava</p>
</div>
<div class="preload-background-images">
<p><img data-src="../images/don-quixote-1.jpg" /></p>
</div>
</section><section id="section-1" class="slide level2" data-background="../images/don-quixote-1.jpg">
<h2></h2>
<aside class="notes">
<ul>
<li>El ingenioso hidalgo Don Quijote de la Mancha</li>
<li>Squire</li>
<li>Inn = castle → knighted</li>
</ul>
</aside>
<div class="preload-background-images">
<p><img data-src="../images/mill.jpg" /></p>
</div>
</section><section id="section-2" class="slide level2" data-background="../images/mill.jpg">
<h2></h2>
<div class="preload-background-images">
<p><img data-src="../images/don-quixote-2.jpg" /></p>
</div>
</section><section id="section-3" class="slide level2" data-background="../images/don-quixote-2.jpg">
<h2></h2>
<aside class="notes">
<p>Don Quixote’s parallel universe</p>
</aside>
</section><section id="language-of-the-year" class="slide level2">
<h2>Language of the Year</h2>
</section><section id="language-of-the-year-1" class="slide level2">
<h2>Language of the Year</h2>
<p><br/></p>
<div class="superbig">
<p><strong>Parallel Java</strong></p>
</div>
</section><section id="language-of-the-year-2" class="slide level2">
<h2>Language of the Year</h2>
<p><br/></p>
<div class="superbig">
<p><strong>Parallel Java</strong></p>
</div>
<p>Java for parallel computing and multi-threading</p>
</section><section id="language-of-the-year-3" class="slide level2">
<h2>Language of the Year</h2>
<p><br/></p>
<div class="superbig">
<p><strong>Parallel Java</strong></p>
</div>
<p><del>Java for parallel computing and multi-threading</del></p>
</section><section id="language-of-the-year-4" class="slide level2">
<h2>Language of the Year</h2>
<p><br/></p>
<div class="superbig">
<p><strong>Parallel Java</strong></p>
</div>
<p>Java from a Parallel Universe</p>
</section><section id="language-of-the-year-5" class="slide level2">
<h2>Language of the Year</h2>
<p><br/></p>
<div class="superbig">
<p><strong>Parallel Java</strong></p>
</div>
<p>Java without annotations</p>
</section></section>
<section><section id="annotations" class="title-slide slide level1" data-state="page-title"><h1>Annotations</h1><div class="preload-background-images">
<p><img data-src="../images/mill.jpg" /></p>
</div></section><section id="annotations-1" class="slide level2" data-background="../images/mill.jpg">
<h2>Annotations</h2>
</section><section id="what-are-they" class="slide level2">
<h2>What are they?</h2>
<pre><code class="java" data-trim data-line-numbers>
@Override
public int hashCode() { ... }

@Test
public void something() { ... }

@JsonTypeInfo(
  use = JsonTypeInfo.Id.NAME,
  include = JsonTypeInfo.As.PROPERTY,
  property = "type")
@JsonSubTypes({
  @Type(value = SubA.class, name = "SubA")
})
public class Something { ... }
</code></pre>
</section><section id="what-are-they-1" class="slide level2">
<h2>What are they?</h2>
<pre><code class="java" data-trim data-line-numbers="1,4,7-13">
@Override
public int hashCode() { ... }

@Test
public void something() { ... }

@JsonTypeInfo(
  use = JsonTypeInfo.Id.NAME,
  include = JsonTypeInfo.As.PROPERTY,
  property = "type")
@JsonSubTypes({
  @Type(value = SubA.class, name = "SubA")
})
public class Something { ... }
</code></pre>
</section><section id="why" class="slide level2">
<h2>Why?</h2>
</section><section id="why-1" class="slide level2">
<h2>Why?</h2>
<p><strong>C#</strong> had them</p>
<p>¯\_(ツ)_/¯</p>
<p><br/></p>
<div class="supersmall">
<ul>
<li><strong>2002</strong> → C#</li>
<li><strong>2004</strong> → Java</li>
</ul>
</div>
</section><section id="why-2" class="slide level2">
<h2>Why?</h2>
<p>Add metadata</p>
<div class="big">
<pre class="java"><code>@Override

@Deprecated

@SuppressWarnings(&quot;deprecation&quot;)

@Nonnull</code></pre>
</div>
</section><section id="why-3" class="slide level2">
<h2>Why?</h2>
<p>Remove external configuration (xml)</p>
<div class="big">
<pre class="java"><code>@Inject

@Autowired

@Bean</code></pre>
</div>
</section><section id="why-4" class="slide level2">
<h2>Why?</h2>
<p>Generate code</p>
<div class="big">
<pre class="java"><code>@Entity

@Data(staticConstructor = &quot;of&quot;)</code></pre>
</div>
</section><section id="why-5" class="slide level2">
<h2>Why?</h2>
<p>Modify runtime behavior</p>
<div class="big">
<pre class="java"><code>@Test

@Transaction(isolation = Isolation.SERIALIZABLE)

@GetMethod(value = &quot;/endpoint/{id}&quot;,
    produces = MediaType.APPLICATION_JSON_VALUE)</code></pre>
</div>
</section><section id="how" class="slide level2">
<h2>How?</h2>
<ul>
<li>Reflection</li>
<li>Code generation</li>
</ul>
</section><section class="slide level2">

<div class="superbig">
<p>Magic</p>
</div>
<div class="preload-background-images">
<p><img data-src="../images/darkmagic.jpg" /></p>
</div>
</section><section id="section-4" class="slide level2" data-background="../images/darkmagic.jpg">
<h2></h2>
<div class="superbig">
<p>Dark     magic</p>
</div>
</section><section id="the-problem" class="slide level2">
<h2>The problem</h2>
</section><section id="the-problems" class="slide level2">
<h2>The problems</h2>
</section><section id="the-problems-1" class="slide level2">
<h2>The problems</h2>
<p>Checked at runtime</p>
</section><section id="the-problems-2" class="slide level2" data-state="page-bad">
<h2>The problems</h2>
<p><img data-src="../images/funtimeexceptions.png" /></p>
</section><section id="the-problems-3" class="slide level2">
<h2>The problems</h2>
<p>Weakly typed</p>
</section><section id="the-problems-4" class="slide level2" data-state="page-bad">
<h2>The problems</h2>
<p>Weakly typed</p>
<div class="big">
<pre class="java"><code>@Autowired @Bean
@Column(name = &quot;id&quot;)
@PostMapping(&quot;/endpoint/new&quot;)
@Test
public void waitwhat() { ... }</code></pre>
</div>
</section><section id="the-problems-5" class="slide level2">
<h2>The problems</h2>
<p>Stringly typed</p>
</section><section id="the-problems-6" class="slide level2" data-state="page-bad">
<h2>The problems</h2>
<p>Stringly typed</p>
<div class="big">
<pre class="java"><code>@PreAuthorize(&quot;isFullyAuthenticated&quot;)</code></pre>
</div>
</section><section id="the-problems-7" class="slide level2" data-state="page-good">
<h2>The problems</h2>
<p>Stringly typed</p>
<div class="big">
<pre class="java"><code>@PreAuthorize(&quot;isFullyAuthenticated()&quot;)</code></pre>
</div>
</section><section id="the-problems-8" class="slide level2">
<h2>The problems</h2>
<p>Discoverability</p>
</section><section id="the-problems-9" class="slide level2" data-state="page-bad">
<h2>The problems</h2>
<p>Discoverability</p>
<p><img data-src="../images/discoverability.png" height="300" /></p>
</section><section id="the-problems-10" class="slide level2">
<h2>The problems</h2>
<p>Debugability</p>
</section><section id="the-problems-11" class="slide level2" data-state="page-bad">
<h2>The problems</h2>
<p>Debugability</p>
<div class="stacktrace">
<pre><code class="xml" data-trim data-line-numbers>
java.lang.IllegalArgumentException: Cannot find cache named 'vets' for Builder[public abstract java.util.Collection com.example.petclinic.vet.VetRepository.findAll() throws org.springframework.dao.DataAccessException] caches=[vets] | key='' | keyGenerator='' | cacheManager='' | cacheResolver='' | condition='' | unless='' | sync='false'
    at org.springframework.cache.interceptor.AbstractCacheResolver.resolveCaches(AbstractCacheResolver.java:92) ~[spring-context-5.1.5.RELEASE.jar:5.1.5.RELEASE]
    at org.springframework.cache.interceptor.CacheAspectSupport.getCaches(CacheAspectSupport.java:252) ~[spring-context-5.1.5.RELEASE.jar:5.1.5.RELEASE]
    at org.springframework.cache.interceptor.CacheAspectSupport$CacheOperationContext.&lt;init>(CacheAspectSupport.java:707) ~[spring-context-5.1.5.RELEASE.jar:5.1.5.RELEASE]
    at org.springframework.cache.interceptor.CacheAspectSupport.getOperationContext(CacheAspectSupport.java:265) ~[spring-context-5.1.5.RELEASE.jar:5.1.5.RELEASE]
    at org.springframework.cache.interceptor.CacheAspectSupport$CacheOperationContexts.&lt;init>(CacheAspectSupport.java:598) ~[spring-context-5.1.5.RELEASE.jar:5.1.5.RELEASE]
    at org.springframework.cache.interceptor.CacheAspectSupport.execute(CacheAspectSupport.java:345) ~[spring-context-5.1.5.RELEASE.jar:5.1.5.RELEASE]
    at org.springframework.cache.interceptor.CacheInterceptor.invoke(CacheInterceptor.java:61) ~[spring-context-5.1.5.RELEASE.jar:5.1.5.RELEASE]
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.1.5.RELEASE.jar:5.1.5.RELEASE]
    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:212) ~[spring-aop-5.1.5.RELEASE.jar:5.1.5.RELEASE]
    at com.sun.proxy.$Proxy133.findAll(Unknown Source) ~[na:na]
    at com.example.petclinic.vet.VetController.showVetList(VetController.java:44) ~[classes/:na]
    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:na]
    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
    at java.base/java.lang.reflect.Method.invoke(Method.java:566) ~[na:na]
    at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:189) ~[spring-web-5.1.5.RELEASE.jar:5.1.5.RELEASE]
    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:138) ~[spring-web-5.1.5.RELEASE.jar:5.1.5.RELEASE]
    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102) ~[spring-webmvc-5.1.5.RELEASE.jar:5.1.5.RELEASE]
    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.1.5.RELEASE.jar:5.1.5.RELEASE]
    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:800) ~[spring-webmvc-5.1.5.RELEASE.jar:5.1.5.RELEASE]
    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.1.5.RELEASE.jar:5.1.5.RELEASE]
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1038) ~[spring-webmvc-5.1.5.RELEASE.jar:5.1.5.RELEASE]
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:942) ~[spring-webmvc-5.1.5.RELEASE.jar:5.1.5.RELEASE]
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1005) ~[spring-webmvc-5.1.5.RELEASE.jar:5.1.5.RELEASE]
    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:897) ~[spring-webmvc-5.1.5.RELEASE.jar:5.1.5.RELEASE]
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:634) ~[tomcat-embed-core-9.0.16.jar:9.0.16]
    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:882) ~[spring-webmvc-5.1.5.RELEASE.jar:5.1.5.RELEASE]
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:741) ~[tomcat-embed-core-9.0.16.jar:9.0.16]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231) ~[tomcat-embed-core-9.0.16.jar:9.0.16]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.16.jar:9.0.16]
    at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.16.jar:9.0.16]
</code></pre>
</div>
</section><section id="the-problems-12" class="slide level2" data-state="page-bad">
<h2>The problems</h2>
<p>Debugability</p>
<div class="stacktrace">
<pre><code class="xml" data-trim data-line-numbers="12">
java.lang.IllegalArgumentException: Cannot find cache named 'vets' for Builder[public abstract java.util.Collection com.example.petclinic.vet.VetRepository.findAll() throws org.springframework.dao.DataAccessException] caches=[vets] | key='' | keyGenerator='' | cacheManager='' | cacheResolver='' | condition='' | unless='' | sync='false'
    at org.springframework.cache.interceptor.AbstractCacheResolver.resolveCaches(AbstractCacheResolver.java:92) ~[spring-context-5.1.5.RELEASE.jar:5.1.5.RELEASE]
    at org.springframework.cache.interceptor.CacheAspectSupport.getCaches(CacheAspectSupport.java:252) ~[spring-context-5.1.5.RELEASE.jar:5.1.5.RELEASE]
    at org.springframework.cache.interceptor.CacheAspectSupport$CacheOperationContext.&lt;init>(CacheAspectSupport.java:707) ~[spring-context-5.1.5.RELEASE.jar:5.1.5.RELEASE]
    at org.springframework.cache.interceptor.CacheAspectSupport.getOperationContext(CacheAspectSupport.java:265) ~[spring-context-5.1.5.RELEASE.jar:5.1.5.RELEASE]
    at org.springframework.cache.interceptor.CacheAspectSupport$CacheOperationContexts.&lt;init>(CacheAspectSupport.java:598) ~[spring-context-5.1.5.RELEASE.jar:5.1.5.RELEASE]
    at org.springframework.cache.interceptor.CacheAspectSupport.execute(CacheAspectSupport.java:345) ~[spring-context-5.1.5.RELEASE.jar:5.1.5.RELEASE]
    at org.springframework.cache.interceptor.CacheInterceptor.invoke(CacheInterceptor.java:61) ~[spring-context-5.1.5.RELEASE.jar:5.1.5.RELEASE]
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.1.5.RELEASE.jar:5.1.5.RELEASE]
    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:212) ~[spring-aop-5.1.5.RELEASE.jar:5.1.5.RELEASE]
    at com.sun.proxy.$Proxy133.findAll(Unknown Source) ~[na:na]
    at com.example.petclinic.vet.VetController.showVetList(VetController.java:44) ~[classes/:na]
    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:na]
    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
    at java.base/java.lang.reflect.Method.invoke(Method.java:566) ~[na:na]
    at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:189) ~[spring-web-5.1.5.RELEASE.jar:5.1.5.RELEASE]
    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:138) ~[spring-web-5.1.5.RELEASE.jar:5.1.5.RELEASE]
    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102) ~[spring-webmvc-5.1.5.RELEASE.jar:5.1.5.RELEASE]
    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.1.5.RELEASE.jar:5.1.5.RELEASE]
    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:800) ~[spring-webmvc-5.1.5.RELEASE.jar:5.1.5.RELEASE]
    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.1.5.RELEASE.jar:5.1.5.RELEASE]
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1038) ~[spring-webmvc-5.1.5.RELEASE.jar:5.1.5.RELEASE]
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:942) ~[spring-webmvc-5.1.5.RELEASE.jar:5.1.5.RELEASE]
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1005) ~[spring-webmvc-5.1.5.RELEASE.jar:5.1.5.RELEASE]
    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:897) ~[spring-webmvc-5.1.5.RELEASE.jar:5.1.5.RELEASE]
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:634) ~[tomcat-embed-core-9.0.16.jar:9.0.16]
    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:882) ~[spring-webmvc-5.1.5.RELEASE.jar:5.1.5.RELEASE]
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:741) ~[tomcat-embed-core-9.0.16.jar:9.0.16]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231) ~[tomcat-embed-core-9.0.16.jar:9.0.16]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.16.jar:9.0.16]
    at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.16.jar:9.0.16]
</code></pre>
</div>
</section><section id="the-problems-13" class="slide level2">
<h2>The problems</h2>
<p>Difficult path to modules due to <strong>reflection</strong></p>
</section><section id="the-problems-14" class="slide level2" data-state="page-bad">
<h2>The problems</h2>
<p>Difficult path to modules due to <strong>reflection</strong></p>
<pre><code class="xml" data-trim data-line-numbers>
WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.springframework.cglib.core.ReflectUtils$1 (jar:file:/home/huzhifeng/tmp/demo/build/libs/demo-0.0.1-SNAPSHOT.jar!/BOOT-INF/lib/spring-core-5.0.1.RELEASE.jar!/) to method java.lang.ClassLoader.defineClass(java.lang.String,byte[],int,int,java.security.ProtectionDomain)
WARNING: Please consider reporting this to the maintainers of org.springframework.cglib.core.ReflectUtils$1
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
</code></pre>
</section><section id="the-solution" class="slide level2">
<h2>The solution</h2>
<div class="fragment">
<div class="superbig">
<p><strong>λ</strong></p>
</div>
<div class="supersmall">
<p>Also, <strong>plain Java</strong></p>
</div>
</div>
</section><section id="frameworks-and-libraries" class="slide level2">
<h2>Frameworks and libraries</h2>
<p>Many existed <strong>before</strong> lambdas were introduced</p>
<p><br/></p>
<div class="supersmall">
<ul>
<li><strong>2004</strong> → Annotations</li>
<li><strong>2014</strong> → Lambdas</li>
</ul>
</div>
</section><section id="what-if" class="slide level2">
<h2>What if …</h2>
<ul>
<li><p>they dropped annotations?</p></li>
<li><p>and <strong>embraced lambdas</strong>?</p></li>
</ul>
</section><section id="parallel-java" class="slide level2">
<h2>Parallel Java</h2>
<p><br/></p>
<p>No annotations!</p>
<p><br/></p>
<p>No magic!</p>
<p><br/></p>
<p>Just <strong>plain Java</strong></p>
</section></section>
<section><section id="testing" class="title-slide slide level1" data-state="page-title"><h1>Testing</h1></section><section id="familiar-java" class="slide level2" data-state="page-bad">
<h2>Familiar Java</h2>
<p><br/></p>
<pre><code class="java" data-trim data-line-numbers>
@Test
public void indexOfReturnsTheCorrectIndex() {
    int actual = "hello world".indexOf('w');
    assertEquals(6, actual);
}
</code></pre>
</section><section id="familiar-java-1" class="slide level2" data-state="page-bad">
<h2>Familiar Java</h2>
<p><br/></p>
<pre><code class="java" data-trim data-line-numbers="1-2">
@Test
public void indexOfReturnsTheCorrectIndex() {
    int actual = "hello world".indexOf('w');
    assertEquals(6, actual);
}
</code></pre>
</section><section id="junit-3" class="slide level2" data-state="page-bad">
<h2>JUnit 3 👹</h2>
<p><br/></p>
<pre><code class="java" data-trim data-line-numbers>
public void testIndexOfReturnsTheCorrectIndex() {
    int actual = "hello world".indexOf('w');
    assertEquals(6, actual);
}
</code></pre>
</section><section id="junit-3-1" class="slide level2" data-state="page-bad">
<h2>JUnit 3 👹</h2>
<p><br/></p>
<pre><code class="java" data-trim data-line-numbers="1">
public void testIndexOfReturnsTheCorrectIndex() {
    int actual = "hello world".indexOf('w');
    assertEquals(6, actual);
}
</code></pre>
</section><section id="parallel-java-1" class="slide level2" data-state="page-good">
<h2>Parallel Java</h2>
<p><br/></p>
<pre><code class="java" data-trim data-line-numbers>
test("indexOf returns the correct index", () -> {
    int actual = "hello world".indexOf('w');
    assertThat(actual).isEqualTo(6);
});
</code></pre>
</section><section id="parallel-java-2" class="slide level2" data-state="page-good">
<h2>Parallel Java</h2>
<p><br/></p>
<pre><code class="java" data-trim data-line-numbers="1">
test("indexOf returns the correct index", () -> {
    int actual = "hello world".indexOf('w');
    assertThat(actual).isEqualTo(6);
});
</code></pre>
</section><section id="before-2014" class="slide level2" data-state="page-bad">
<h2>Before 2014</h2>
<p><br/></p>
<pre><code class="java" data-trim data-line-numbers>
test("indexOf returns the correct index", new Runnable() {
    @Override
    public void run() {
        int actual = "hello world".indexOf('w');
        assertThat(actual).isEqualTo(6);
    }
});
</code></pre>
</section><section id="before-2014-1" class="slide level2" data-state="page-bad">
<h2>Before 2014</h2>
<p><br/></p>
<pre><code class="java" data-trim data-line-numbers="2">
test("indexOf returns the correct index", new Runnable() {
    @Override
    public void run() {
        int actual = "hello world".indexOf('w');
        assertThat(actual).isEqualTo(6);
    }
});
</code></pre>
</section><section id="parallel-java-3" class="slide level2" data-state="page-good">
<h2>Parallel Java</h2>
<p><br/></p>
<pre><code class="java" data-trim data-line-numbers>
test("indexOf returns the correct index", () -> {
    int actual = "hello world".indexOf('w');
    assertThat(actual).isEqualTo(6);
});
</code></pre>
<div class="superbig">
<p>λ</p>
</div>
</section><section id="pros-cons" class="slide level2">
<h2>Pros &amp; cons</h2>
<ul>
<li><strong>Con</strong> ugly without lambdas</li>
</ul>
<p><br/></p>
<div class="fragment">
<ul>
<li><strong>Pro</strong> clear description of test</li>
</ul>
</div>
</section></section>
<section><section id="web" class="title-slide slide level1" data-state="page-title"><h1>Web</h1></section><section id="familiar-java-2" class="slide level2" data-state="page-bad">
<h2>Familiar Java</h2>
<p><br/></p>
<pre><code class="java" data-trim data-line-numbers>
@GetMapping("/todo/{id}")
public String getTodo(@PathVariable("id") String id) {
    return fetch(id);
}
</code></pre>
</section><section id="familiar-java-3" class="slide level2" data-state="page-bad">
<h2>Familiar Java</h2>
<p><br/></p>
<pre><code class="java" data-trim data-line-numbers="1">
@GetMapping("/todo/{id}")
public String getTodo(@PathVariable("id") String id) {
    return fetch(id);
}
</code></pre>
</section><section id="familiar-java-4" class="slide level2" data-state="page-bad">
<h2>Familiar Java</h2>
<p><br/></p>
<pre><code class="java" data-trim data-line-numbers="2">
@GetMapping("/todo/{id}")
public String getTodo(@PathVariable("id") String id) {
    return fetch(id);
}
</code></pre>
</section><section id="parallel-java-4" class="slide level2" data-state="page-good">
<h2>Parallel Java</h2>
<p><br/></p>
<pre><code class="java" data-trim data-line-numbers>
get("/todo/:id", (request, response) -> {
    return fetch(request.params("id"));
});
</code></pre>
</section><section id="parallel-java-5" class="slide level2" data-state="page-good">
<h2>Parallel Java</h2>
<p><br/></p>
<pre><code class="java" data-trim data-line-numbers="1">
get("/todo/:id", (request, response) -> {
    return fetch(request.params("id"));
});
</code></pre>
</section><section id="before-2014-2" class="slide level2" data-state="page-bad">
<h2>Before 2014</h2>
<p><br/></p>
<pre><code class="java" data-trim data-line-numbers>
get("/todo/:id", new Route() {
    @Override
    public Object handle(Request request, Response response) throws Exception {
        return fetch(request.params("id"));
    }
});
</code></pre>
</section><section id="before-2014-3" class="slide level2" data-state="page-bad">
<h2>Before 2014</h2>
<p><br/></p>
<pre><code class="java" data-trim data-line-numbers="2">
get("/todo/:id", new Route() {
    @Override
    public Object handle(Request request, Response response) throws Exception {
        return fetch(request.params("id"));
    }
});
</code></pre>
</section><section id="parallel-java-6" class="slide level2" data-state="page-good">
<h2>Parallel Java</h2>
<p><br/></p>
<pre><code class="java" data-trim data-line-numbers>
get("/todo/:id", (request, response) -> {
    return fetch(request.params("id"));
});
</code></pre>
<div class="superbig">
<p>λ</p>
</div>
</section><section id="separating-concerns" class="slide level2" data-state="page-good">
<h2>Separating concerns</h2>
<p><br/></p>
<pre><code class="java" data-trim data-line-numbers>
public void defineRoutes() {
    get("/todo/:id", this::handleGet);
}

// ...

public String handleGet(Request request, Response response) {
    return fetch(request.params("id"));
}
</code></pre>
</section><section id="separating-concerns-1" class="slide level2" data-state="page-good">
<h2>Separating concerns</h2>
<p><br/></p>
<pre><code class="java" data-trim data-line-numbers="2,7">
public void defineRoutes() {
    get("/todo/:id", this::handleGet);
}

// ...

public String handleGet(Request request, Response response) {
    return fetch(request.params("id"));
}
</code></pre>
</section><section id="cross-cutting-concerns" class="slide level2" data-state="page-good">
<h2>Cross-cutting concerns</h2>
<p><br/></p>
<pre><code class="java" data-trim data-line-numbers>
before((request, response) -> {
    if (!authenticated(request)) {
        halt(401, "nope");
    }
});
</code></pre>
</section><section id="pros-cons-1" class="slide level2">
<h2>Pros &amp; Cons</h2>
<ul>
<li><strong>Con</strong> ugly without lambdas</li>
</ul>
<p><br/></p>
<div class="fragment">
<ul>
<li><strong>Pro</strong> clean separation of concerns</li>
<li><strong>Pro</strong> generate endpoints</li>
</ul>
</div>
</section></section>
<section><section id="database" class="title-slide slide level1" data-state="page-title"><h1>Database</h1></section><section id="familiar-java-5" class="slide level2" data-state="page-bad">
<h2>Familiar Java</h2>
<p><br/></p>
<pre><code class="java" data-trim data-line-numbers>
@Entity
@Table(name = "todo")
public class Todo {
    @Id
    @GeneratedValue
    @Column(name = "id")
    private String id;

    @Column(name = "title")
    private String title;

    public Todo() {
        // empty
    }
}
</code></pre>
</section><section id="familiar-java-6" class="slide level2" data-state="page-bad">
<h2>Familiar Java</h2>
<p><br/></p>
<pre><code class="java" data-trim data-line-numbers="1-2,4-6,9">
@Entity
@Table(name = "todo")
public class Todo {
    @Id
    @GeneratedValue
    @Column(name = "id")
    private String id;

    @Column(name = "title")
    private String title;

    public Todo() {
        // empty
    }
}
</code></pre>
</section><section id="familiar-java-7" class="slide level2" data-state="page-bad">
<h2>Familiar Java</h2>
<p><br/></p>
<pre><code class="java" data-trim data-line-numbers="7,10">
@Entity
@Table(name = "todo")
public class Todo {
    @Id
    @GeneratedValue
    @Column(name = "id")
    private String id;

    @Column(name = "title")
    private String title;

    public Todo() {
        // empty
    }
}
</code></pre>
</section><section id="familiar-java-8" class="slide level2" data-state="page-bad">
<h2>Familiar Java</h2>
<p><br/></p>
<pre><code class="java" data-trim data-line-numbers="12-14">
@Entity
@Table(name = "todo")
public class Todo {
    @Id
    @GeneratedValue
    @Column(name = "id")
    private String id;

    @Column(name = "title")
    private String title;

    public Todo() {
        // empty
    }
}
</code></pre>
</section><section id="parallel-java-7" class="slide level2" data-state="page-good">
<h2>Parallel Java</h2>
<p><br/></p>
<pre><code class="java" data-trim data-line-numbers>
public class Todo {
    private final String id;
    private final String title;

    // No default constructor
}
</code></pre>
</section><section id="parallel-java-8" class="slide level2" data-state="page-good">
<h2>Parallel Java</h2>
<p><br/></p>
<pre><code class="java" data-trim data-line-numbers>
List&lt;Todo> todos = engine.query(handle -> {
    return handle
        .createQuery("SELECT * FROM todo WHERE id = :id")
        .bind("id", id)
        .mapToBean(Todo.class)
        .list();
});
</code></pre>
</section><section id="parallel-java-9" class="slide level2" data-state="page-good">
<h2>Parallel Java</h2>
<p><br/></p>
<pre><code class="java" data-trim data-line-numbers="3">
List&lt;Todo> todos = engine.query(handle -> {
    return handle
        .createQuery("SELECT * FROM todo WHERE id = :id")
        .bind("id", id)
        .mapToBean(Todo.class)
        .list();
});
</code></pre>
</section><section id="parallel-java-10" class="slide level2" data-state="page-good">
<h2>Parallel Java</h2>
<p><br/></p>
<pre><code class="java" data-trim data-line-numbers="5">
List&lt;Todo> todos = engine.query(handle -> {
    return handle
        .createQuery("SELECT * FROM todo WHERE id = :id")
        .bind("id", id)
        .mapToBean(Todo.class)
        .list();
});
</code></pre>
</section><section id="how-about-transactions" class="slide level2" data-state="page-good">
<h2>How about transactions?</h2>
<p><br/></p>
<pre><code class="java" data-trim data-line-numbers>
String query = "SELECT * FROM todo WHERE title = :title";
String update = "UPDATE todo SET completed = TRUE WHERE id = :id";

engine.execute(handle -> {
    return handle.inTransaction(h -> {
        Todo todo = h.createQuery(query)
                .bind("title", "rewrite annotations")
                .mapToBean(Todo.class)
                .findFirst();

        h.createUpdate(update)
                .bind("id", todo.id)
                .execute();
    });
});
</code></pre>
</section><section id="how-about-transactions-1" class="slide level2" data-state="page-good">
<h2>How about transactions?</h2>
<p><br/></p>
<pre><code class="java" data-trim data-line-numbers="4-5,14-15">
String query = "SELECT * FROM todo WHERE title = :title";
String update = "UPDATE todo SET completed = TRUE WHERE id = :id";

engine.execute(handle -> {
    return handle.inTransaction(h -> {
        Todo todo = h.createQuery(query)
                .bind("title", "rewrite annotations")
                .mapToBean(Todo.class)
                .findFirst();

        h.createUpdate(update)
                .bind("id", todo.id)
                .execute();
    });
});
</code></pre>
</section><section id="pros-cons-2" class="slide level2">
<h2>Pros &amp; Cons</h2>
<ul>
<li><strong>Con</strong> write SQL directly</li>
<li><strong>Con</strong> still some reflection magic</li>
<li><strong>Con</strong> duplication between code and SQL</li>
</ul>
<p><br/></p>
<div class="fragment">
<ul>
<li><strong>Pro</strong> write SQL directly</li>
<li><strong>Pro</strong> clean separation of concerns</li>
<li><strong>Pro</strong> immutable domain classes</li>
</ul>
</div>
</section></section>
<section><section id="dependency-injection" class="title-slide slide level1" data-state="page-title"><h1>Dependency Injection</h1></section><section id="familiar-java-9" class="slide level2">
<h2>Familiar Java</h2>
<p><br/></p>
<ul>
<li>Spring</li>
<li>Guice</li>
</ul>
</section><section id="di-with-spring" class="slide level2">
<h2>DI with Spring</h2>
</section><section id="di-with-spring-1" class="slide level2" data-state="page-bad">
<h2>DI with Spring</h2>
<p><br/></p>
<pre><code class="java" data-trim data-line-numbers>
public class INeedSomething {
    @Autowired
    private Something needed;
}

public class IHaveSomething {
    @Bean
    public Something something = ...;
}
</code></pre>
</section><section id="di-with-spring-2" class="slide level2" data-state="page-bad">
<h2>DI with Spring</h2>
<p><br/></p>
<pre><code class="java" data-trim data-line-numbers="2-3">
public class INeedSomething {
    @Autowired
    private Something needed;
}

public class IHaveSomething {
    @Bean
    public Something something = ...;
}
</code></pre>
</section><section id="di-with-spring-3" class="slide level2" data-state="page-bad">
<h2>DI with Spring</h2>
<p><br/></p>
<pre><code class="java" data-trim data-line-numbers="7-8">
public class INeedSomething {
    @Autowired
    private Something needed;
}

public class IHaveSomething {
    @Bean
    public Something something = ...;
}
</code></pre>
</section><section id="di-with-spring-4" class="slide level2" data-state="page-bad">
<h2>DI with Spring</h2>
<p><br/></p>
<pre><code class="java" data-trim data-line-numbers>
public class INeedSomething {
    @Autowired
    private Something needed;
}

public class IHaveSomething {
    @Bean
    public Something something = ...;
}
</code></pre>
</section><section id="di-with-spring-5" class="slide level2" data-state="page-bad">
<h2>DI with Spring</h2>
<p><br/></p>
<pre><code class="java" data-trim data-line-numbers>
public class INeedSomething {
    @Autowired
    public INeedSomething(Something needed) { ... }
}

public class IHaveSomething {
    @Bean
    public Something something = ...;
}
</code></pre>
</section><section id="di-with-spring-6" class="slide level2" data-state="page-bad">
<h2>DI with Spring</h2>
<p><br/></p>
<pre><code class="java" data-trim data-line-numbers>
public class INeedSomething {

    public INeedSomething(Something needed) { ... }
}

public class IHaveSomething {
    @Bean
    public Something something = ...;
}
</code></pre>
</section><section id="di-with-spring-7" class="slide level2">
<h2>DI with Spring</h2>
<p>Architectural boundaries</p>
</section><section id="di-with-spring-8" class="slide level2" data-state="page-bad">
<h2>DI with Spring</h2>
<p><br/></p>
<pre><code class="java" data-trim data-line-numbers>
public class INeedSomething {

    public INeedSomething(Something needed) { ... }
}

public class IHaveSomething {
    @Bean
    public Something something = ...;
}
</code></pre>
</section><section id="di-with-spring-9" class="slide level2" data-state="page-bad">
<h2>DI with Spring</h2>
<p><br/></p>
<pre><code class="java" data-trim data-line-numbers="6">
public class INeedSomething {

    public INeedSomething(Something needed) { ... }
}

public class IHaveSomething {
    @Bean
    public Something something = ...;
}
</code></pre>
</section><section id="di-with-spring-10" class="slide level2" data-state="page-bad">
<h2>DI with Spring</h2>
<p><br/></p>
<pre><code class="java" data-trim data-line-numbers="6">
public class INeedSomething {

    public INeedSomething(Something needed) { ... }
}

public class Main {
    @Bean
    public Something something = ...;
}
</code></pre>
</section><section id="di-with-spring-11" class="slide level2" data-state="page-bad">
<h2>DI with Spring</h2>
<p><br/></p>
<pre><code class="java" data-trim data-line-numbers="6">
public class INeedSomething {

    public INeedSomething(Something needed) { ... }
}

public class EmployeeDAO {
    @Bean
    public Something something = ...;
}
</code></pre>
</section><section id="di-with-spring-12" class="slide level2" data-state="page-bad">
<h2>DI with Spring</h2>
<p><br/></p>
<pre><code class="java" data-trim data-line-numbers="6">
public class INeedSomething {

    public INeedSomething(Something needed) { ... }
}

public class Util {
    @Bean
    public Something something = ...;
}
</code></pre>
<div class="preload-background-images">
<p><img data-src="../images/boundary.jpg" /></p>
</div>
</section><section id="section-5" class="slide level2" data-background="../images/boundary.jpg">
<h2></h2>
</section><section id="di-with-spring-13" class="slide level2">
<h2>DI with Spring</h2>
<p>A mistake: no match</p>
</section><section id="di-with-spring-14" class="slide level2" data-state="page-bad">
<h2>DI with Spring</h2>
<p><br/></p>
<pre><code class="java" data-trim data-line-numbers>
public class INeedSomething {

    public INeedSomething(Something needed) { ... }
}

public class IHaveSomething {
    // Forgot to put @Bean here!
    public Something something = ...;
}
</code></pre>
</section><section id="di-with-spring-15" class="slide level2" data-state="page-bad">
<h2>DI with Spring</h2>
<p><br/></p>
<pre><code class="java" data-trim data-line-numbers="7-8">
public class INeedSomething {

    public INeedSomething(Something needed) { .. }
}

public class IHaveSomething {
    // Forgot to put @Bean here!
    public Something something = ...;
}
</code></pre>
</section><section id="di-with-spring-16" class="slide level2" data-state="page-bad">
<h2>DI with Spring</h2>
<div class="stacktrace">
<pre><code class="xml" data-trim data-line-numbers>
org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'petController': Unsatisfied dependency expressed through field 'something'; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'com.example.petclinic.model.Something' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:596) ~[spring-beans-5.1.5.RELEASE.jar:5.1.5.RELEASE]
    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:90) ~[spring-beans-5.1.5.RELEASE.jar:5.1.5.RELEASE]
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:374) ~[spring-beans-5.1.5.RELEASE.jar:5.1.5.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1395) ~[spring-beans-5.1.5.RELEASE.jar:5.1.5.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:592) ~[spring-beans-5.1.5.RELEASE.jar:5.1.5.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:515) ~[spring-beans-5.1.5.RELEASE.jar:5.1.5.RELEASE]
    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320) ~[spring-beans-5.1.5.RELEASE.jar:5.1.5.RELEASE]
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222) ~[spring-beans-5.1.5.RELEASE.jar:5.1.5.RELEASE]
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318) ~[spring-beans-5.1.5.RELEASE.jar:5.1.5.RELEASE]
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-5.1.5.RELEASE.jar:5.1.5.RELEASE]
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:849) ~[spring-beans-5.1.5.RELEASE.jar:5.1.5.RELEASE]
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:877) ~[spring-context-5.1.5.RELEASE.jar:5.1.5.RELEASE]
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:549) ~[spring-context-5.1.5.RELEASE.jar:5.1.5.RELEASE]
    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:142) ~[spring-boot-2.1.3.RELEASE.jar:2.1.3.RELEASE]
    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:775) [spring-boot-2.1.3.RELEASE.jar:2.1.3.RELEASE]
    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:397) [spring-boot-2.1.3.RELEASE.jar:2.1.3.RELEASE]
    at org.springframework.boot.SpringApplication.run(SpringApplication.java:316) [spring-boot-2.1.3.RELEASE.jar:2.1.3.RELEASE]
    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1260) [spring-boot-2.1.3.RELEASE.jar:2.1.3.RELEASE]
    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1248) [spring-boot-2.1.3.RELEASE.jar:2.1.3.RELEASE]
    at com.example.petclinic.PetClinicApplication.main(PetClinicApplication.java:32) [classes/:na]
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_181]
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_181]
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_181]
    at java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_181]
    at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:49) [spring-boot-devtools-2.1.3.RELEASE.jar:2.1.3.RELEASE]
Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'com.example.petclinic.model.Something' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoMatchingBeanFound(DefaultListableBeanFactory.java:1654) ~[spring-beans-5.1.5.RELEASE.jar:5.1.5.RELEASE]
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1213) ~[spring-beans-5.1.5.RELEASE.jar:5.1.5.RELEASE]
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1167) ~[spring-beans-5.1.5.RELEASE.jar:5.1.5.RELEASE]
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:593) ~[spring-beans-5.1.5.RELEASE.jar:5.1.5.RELEASE]
    ... 24 common frames omitted
</code></pre>
</div>
</section><section id="di-with-spring-17" class="slide level2" data-state="page-bad">
<h2>DI with Spring</h2>
<div class="stacktrace">
<pre><code class="xml" data-trim data-line-numbers="21">
org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'petController': Unsatisfied dependency expressed through field 'something'; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'com.example.petclinic.model.Something' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:596) ~[spring-beans-5.1.5.RELEASE.jar:5.1.5.RELEASE]
    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:90) ~[spring-beans-5.1.5.RELEASE.jar:5.1.5.RELEASE]
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:374) ~[spring-beans-5.1.5.RELEASE.jar:5.1.5.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1395) ~[spring-beans-5.1.5.RELEASE.jar:5.1.5.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:592) ~[spring-beans-5.1.5.RELEASE.jar:5.1.5.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:515) ~[spring-beans-5.1.5.RELEASE.jar:5.1.5.RELEASE]
    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320) ~[spring-beans-5.1.5.RELEASE.jar:5.1.5.RELEASE]
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222) ~[spring-beans-5.1.5.RELEASE.jar:5.1.5.RELEASE]
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318) ~[spring-beans-5.1.5.RELEASE.jar:5.1.5.RELEASE]
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-5.1.5.RELEASE.jar:5.1.5.RELEASE]
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:849) ~[spring-beans-5.1.5.RELEASE.jar:5.1.5.RELEASE]
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:877) ~[spring-context-5.1.5.RELEASE.jar:5.1.5.RELEASE]
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:549) ~[spring-context-5.1.5.RELEASE.jar:5.1.5.RELEASE]
    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:142) ~[spring-boot-2.1.3.RELEASE.jar:2.1.3.RELEASE]
    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:775) [spring-boot-2.1.3.RELEASE.jar:2.1.3.RELEASE]
    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:397) [spring-boot-2.1.3.RELEASE.jar:2.1.3.RELEASE]
    at org.springframework.boot.SpringApplication.run(SpringApplication.java:316) [spring-boot-2.1.3.RELEASE.jar:2.1.3.RELEASE]
    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1260) [spring-boot-2.1.3.RELEASE.jar:2.1.3.RELEASE]
    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1248) [spring-boot-2.1.3.RELEASE.jar:2.1.3.RELEASE]
    at com.example.petclinic.PetClinicApplication.main(PetClinicApplication.java:32) [classes/:na]
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_181]
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_181]
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_181]
    at java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_181]
    at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:49) [spring-boot-devtools-2.1.3.RELEASE.jar:2.1.3.RELEASE]
Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'com.example.petclinic.model.Something' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoMatchingBeanFound(DefaultListableBeanFactory.java:1654) ~[spring-beans-5.1.5.RELEASE.jar:5.1.5.RELEASE]
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1213) ~[spring-beans-5.1.5.RELEASE.jar:5.1.5.RELEASE]
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1167) ~[spring-beans-5.1.5.RELEASE.jar:5.1.5.RELEASE]
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:593) ~[spring-beans-5.1.5.RELEASE.jar:5.1.5.RELEASE]
    ... 24 common frames omitted
</code></pre>
</div>
</section><section id="di-with-spring-18" class="slide level2" data-state="page-bad">
<h2>DI with Spring</h2>
<div class="stacktrace">
<pre><code class="xml" data-trim data-line-numbers="1337">
org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'petController': Unsatisfied dependency expressed through field 'something'; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'com.example.petclinic.model.Something' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:596) ~[spring-beans-5.1.5.RELEASE.jar:5.1.5.RELEASE]
    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:90) ~[spring-beans-5.1.5.RELEASE.jar:5.1.5.RELEASE]
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:374) ~[spring-beans-5.1.5.RELEASE.jar:5.1.5.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1395) ~[spring-beans-5.1.5.RELEASE.jar:5.1.5.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:592) ~[spring-beans-5.1.5.RELEASE.jar:5.1.5.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:515) ~[spring-beans-5.1.5.RELEASE.jar:5.1.5.RELEASE]
    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320) ~[spring-beans-5.1.5.RELEASE.jar:5.1.5.RELEASE]
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222) ~[spring-beans-5.1.5.RELEASE.jar:5.1.5.RELEASE]
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318) ~[spring-beans-5.1.5.RELEASE.jar:5.1.5.RELEASE]
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-5.1.5.RELEASE.jar:5.1.5.RELEASE]
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:849) ~[spring-beans-5.1.5.RELEASE.jar:5.1.5.RELEASE]
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:877) ~[spring-context-5.1.5.RELEASE.jar:5.1.5.RELEASE]
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:549) ~[spring-context-5.1.5.RELEASE.jar:5.1.5.RELEASE]
    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:142) ~[spring-boot-2.1.3.RELEASE.jar:2.1.3.RELEASE]
    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:775) [spring-boot-2.1.3.RELEASE.jar:2.1.3.RELEASE]
    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:397) [spring-boot-2.1.3.RELEASE.jar:2.1.3.RELEASE]
    at org.springframework.boot.SpringApplication.run(SpringApplication.java:316) [spring-boot-2.1.3.RELEASE.jar:2.1.3.RELEASE]
    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1260) [spring-boot-2.1.3.RELEASE.jar:2.1.3.RELEASE]
    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1248) [spring-boot-2.1.3.RELEASE.jar:2.1.3.RELEASE]
    at com.example.petclinic.PetClinicApplication.main(PetClinicApplication.java:32) [classes/:na]
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_181]
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_181]
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_181]
    at java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_181]
    at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:49) [spring-boot-devtools-2.1.3.RELEASE.jar:2.1.3.RELEASE]
Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'com.example.petclinic.model.Something' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoMatchingBeanFound(DefaultListableBeanFactory.java:1654) ~[spring-beans-5.1.5.RELEASE.jar:5.1.5.RELEASE]
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1213) ~[spring-beans-5.1.5.RELEASE.jar:5.1.5.RELEASE]
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1167) ~[spring-beans-5.1.5.RELEASE.jar:5.1.5.RELEASE]
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:593) ~[spring-beans-5.1.5.RELEASE.jar:5.1.5.RELEASE]
    ... 24 common frames omitted
</code></pre>
</div>
</section><section id="di-with-spring-19" class="slide level2" data-state="page-bad">
<h2>DI with Spring</h2>
<div class="stacktrace">
<pre><code class="xml" data-trim data-line-numbers="1,27">
org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'petController': Unsatisfied dependency expressed through field 'something'; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'com.example.petclinic.model.Something' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:596) ~[spring-beans-5.1.5.RELEASE.jar:5.1.5.RELEASE]
    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:90) ~[spring-beans-5.1.5.RELEASE.jar:5.1.5.RELEASE]
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:374) ~[spring-beans-5.1.5.RELEASE.jar:5.1.5.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1395) ~[spring-beans-5.1.5.RELEASE.jar:5.1.5.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:592) ~[spring-beans-5.1.5.RELEASE.jar:5.1.5.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:515) ~[spring-beans-5.1.5.RELEASE.jar:5.1.5.RELEASE]
    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320) ~[spring-beans-5.1.5.RELEASE.jar:5.1.5.RELEASE]
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222) ~[spring-beans-5.1.5.RELEASE.jar:5.1.5.RELEASE]
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318) ~[spring-beans-5.1.5.RELEASE.jar:5.1.5.RELEASE]
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-5.1.5.RELEASE.jar:5.1.5.RELEASE]
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:849) ~[spring-beans-5.1.5.RELEASE.jar:5.1.5.RELEASE]
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:877) ~[spring-context-5.1.5.RELEASE.jar:5.1.5.RELEASE]
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:549) ~[spring-context-5.1.5.RELEASE.jar:5.1.5.RELEASE]
    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:142) ~[spring-boot-2.1.3.RELEASE.jar:2.1.3.RELEASE]
    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:775) [spring-boot-2.1.3.RELEASE.jar:2.1.3.RELEASE]
    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:397) [spring-boot-2.1.3.RELEASE.jar:2.1.3.RELEASE]
    at org.springframework.boot.SpringApplication.run(SpringApplication.java:316) [spring-boot-2.1.3.RELEASE.jar:2.1.3.RELEASE]
    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1260) [spring-boot-2.1.3.RELEASE.jar:2.1.3.RELEASE]
    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1248) [spring-boot-2.1.3.RELEASE.jar:2.1.3.RELEASE]
    at com.example.petclinic.PetClinicApplication.main(PetClinicApplication.java:32) [classes/:na]
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_181]
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_181]
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_181]
    at java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_181]
    at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:49) [spring-boot-devtools-2.1.3.RELEASE.jar:2.1.3.RELEASE]
Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'com.example.petclinic.model.Something' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoMatchingBeanFound(DefaultListableBeanFactory.java:1654) ~[spring-beans-5.1.5.RELEASE.jar:5.1.5.RELEASE]
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1213) ~[spring-beans-5.1.5.RELEASE.jar:5.1.5.RELEASE]
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1167) ~[spring-beans-5.1.5.RELEASE.jar:5.1.5.RELEASE]
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:593) ~[spring-beans-5.1.5.RELEASE.jar:5.1.5.RELEASE]
    ... 24 common frames omitted
</code></pre>
</div>
</section><section id="di-with-spring-20" class="slide level2">
<h2>DI with Spring</h2>
<p>A mistake: two matches</p>
</section><section id="di-with-spring-21" class="slide level2" data-state="page-bad">
<h2>DI with Spring</h2>
<p><br/></p>
<pre><code class="java" data-trim data-line-numbers>
public class INeedSomething {

    public INeedSomething(Something needed) { ... }
}

public class IHaveSomething {
    @Bean
    public Something something = ...;

    @Bean
    public Something somethingElse = ...;
}
</code></pre>
</section><section id="di-with-spring-22" class="slide level2" data-state="page-bad">
<h2>DI with Spring</h2>
<p><br/></p>
<pre><code class="java" data-trim data-line-numbers="7-11">
public class INeedSomething {

    public INeedSomething(Something needed) { ... }
}

public class IHaveSomething {
    @Bean
    public Something something = ...;

    @Bean
    public Something somethingElse = ...;
}
</code></pre>
</section><section id="di-with-spring-23" class="slide level2" data-state="page-bad">
<h2>DI with Spring</h2>
<p><br/></p>
<div class="stacktrace">
<pre><code class="xml" data-trim data-line-numbers>
***************************
APPLICATION FAILED TO START
***************************

Description:

Field needed in com.example.petclinic.owner.PetController required a single bean, but 2 were found:
    - something: defined by method 'something' in class path resource [com/example/petclinic/system/CacheConfiguration.class]
    - somethingElse: defined by method 'somethingElse' in class path resource [com/example/petclinic/system/CrashController.class]


Action:

Consider marking one of the beans as @Primary, updating the consumer to accept multiple beans, or using @Qualifier to identify the bean that should be consumed
</code></pre>
<p><br/></p>
</div>
<div class="fragment">
<pre class="xml"><code>logging.level.org.springframework=OFF</code></pre>
</div>
</section><section id="di-with-spring-24" class="slide level2">
<h2>DI with Spring</h2>
<p>A mistake: cyclic dependencies</p>
</section><section id="di-with-spring-25" class="slide level2" data-state="page-bad">
<h2>DI with Spring</h2>
<p><br/></p>
<pre><code class="java" data-trim data-line-numbers>
public class INeedSomething {

    public INeedSomething(Something needed) { ... }
}

public class IHaveSomething {
    @Bean
    public Something something(SomethingElse somethingElse) {}

    @Bean
    public SomethingElse somethingElse(Something something) {}
}
</code></pre>
</section><section id="di-with-spring-26" class="slide level2" data-state="page-bad">
<h2>DI with Spring</h2>
<p><br/></p>
<pre><code class="java" data-trim data-line-numbers="7-11">
public class INeedSomething {

    public INeedSomething(Something needed) { ... }
}

public class IHaveSomething {
    @Bean
    public Something something(SomethingElse somethingElse) {}

    @Bean
    public SomethingElse somethingElse(Something something) {}
}
</code></pre>
</section><section id="di-with-spring-27" class="slide level2" data-state="page-bad">
<h2>DI with Spring</h2>
<p><br/></p>
<div class="stacktrace">
<pre><code class="xml" data-trim data-line-numbers>
***************************
APPLICATION FAILED TO START
***************************

Description:

The dependencies of some of the beans in the application context form a cycle:

   petController defined in file [/spring-petclinic/target/classes/org/springframework/samples/petclinic/owner/PetController.class]
┌─────┐
|  something defined in class path resource [org/springframework/samples/petclinic/owner/OwnerController.class]
↑     ↓
|  somethingElse defined in class path resource [org/springframework/samples/petclinic/owner/OwnerController.class]
└─────┘
</code></pre>
</div>
</section><section id="di-with-guice" class="slide level2">
<h2>DI with Guice</h2>
</section><section id="di-with-guice-1" class="slide level2" data-state="page-bad">
<h2>DI with Guice</h2>
<p><br/></p>
<pre><code class="java" data-trim data-line-numbers>
public class INeedSomething {
    @Inject
    public INeedSomething(Something needed) { ... }
}

public class Module extends AbstractModule {
    public void configure() {
        bind(Something.class).toInstance(...);
    }
}
</code></pre>
</section><section id="di-with-guice-2" class="slide level2" data-state="page-bad">
<h2>DI with Guice</h2>
<p><br/></p>
<pre><code class="java" data-trim data-line-numbers="2-3">
public class INeedSomething {
    @Inject
    public INeedSomething(Something needed) { ... }
}

public class Module extends AbstractModule {
    public void configure() {
        bind(Something.class).toInstance(...);
    }
}
</code></pre>
</section><section id="di-with-guice-3" class="slide level2" data-state="page-bad">
<h2>DI with Guice</h2>
<p><br/></p>
<pre><code class="java" data-trim data-line-numbers="8">
public class INeedSomething {
    @Inject
    public INeedSomething(Something needed) { ... }
}

public class Module extends AbstractModule {
    public void configure() {
        bind(Something.class).toInstance(...);
    }
}
</code></pre>
</section><section id="di-with-guice-4" class="slide level2">
<h2>DI with Guice</h2>
<p>A mistake: no match</p>
</section><section id="di-with-guice-5" class="slide level2" data-state="page-bad">
<h2>DI with Guice</h2>
<p><br/></p>
<pre><code class="java" data-trim data-line-numbers>
public class INeedSomething {
    @Inject
    public INeedSomething(Something needed) { ... }
}

public class Module extends AbstractModule {
    public void configure() {
        // bind(Something.class).toInstance(...);
    }
}
</code></pre>
</section><section id="di-with-guice-6" class="slide level2" data-state="page-bad">
<h2>DI with Guice</h2>
<p><br/></p>
<pre><code class="java" data-trim data-line-numbers="8">
public class INeedSomething {
    @Inject
    public INeedSomething(Something needed) { ... }
}

public class Module extends AbstractModule {
    public void configure() {
        // bind(Something.class).toInstance(...);
    }
}
</code></pre>
</section><section id="di-with-guice-7" class="slide level2" data-state="page-bad">
<h2>DI with Guice</h2>
<p><br/></p>
<div class="stacktrace">
<pre><code class="xml" data-trim data-line-numbers>
com.google.inject.CreationException: Unable to create injector, see the following errors:

1) No implementation for Something was bound.
  while locating Something
    for the 1st parameter of controllers.CountController.&lt;init>(CountController.java:22)
  while locating controllers.CountController
    for the 3rd parameter of router.Routes.&lt;init>(Routes.scala:38)
  at play.api.inject.RoutesProvider$.bindingsFromConfiguration(BuiltinModule.scala:123):
Binding(class router.Routes to self) (via modules: com.google.inject.util.Modules$OverrideModule -> play.api.inject.guice.GuiceableModuleConversions$$anon$4)

1 error
    at com.google.inject.internal.Errors.throwCreationExceptionIfErrorsExist(Errors.java:543)
    at com.google.inject.internal.InternalInjectorCreator.initializeStatically(InternalInjectorCreator.java:159)
    at com.google.inject.internal.InternalInjectorCreator.build(InternalInjectorCreator.java:106)
    at com.google.inject.Guice.createInjector(Guice.java:87)
    at com.google.inject.Guice.createInjector(Guice.java:78)
    at play.api.inject.guice.GuiceBuilder.injector(GuiceInjectorBuilder.scala:186)
    at play.api.inject.guice.GuiceApplicationBuilder.build(GuiceApplicationBuilder.scala:139)
    at play.api.inject.guice.GuiceApplicationLoader.load(GuiceApplicationLoader.scala:21)
    at play.core.server.DevServerStart$$anon$1.$anonfun$reload$3(DevServerStart.scala:176)
    at play.utils.Threads$.withContextClassLoader(Threads.scala:22)
</code></pre>
</div>
</section><section id="di-with-guice-8" class="slide level2" data-state="page-bad">
<h2>DI with Guice</h2>
<p><br/></p>
<div class="stacktrace">
<pre><code class="xml" data-trim data-line-numbers="3-9">
com.google.inject.CreationException: Unable to create injector, see the following errors:

1) No implementation for Something was bound.
  while locating Something
    for the 1st parameter of controllers.CountController.&lt;init>(CountController.java:22)
  while locating controllers.CountController
    for the 3rd parameter of router.Routes.&lt;init>(Routes.scala:38)
  at play.api.inject.RoutesProvider$.bindingsFromConfiguration(BuiltinModule.scala:123):
Binding(class router.Routes to self) (via modules: com.google.inject.util.Modules$OverrideModule -> play.api.inject.guice.GuiceableModuleConversions$$anon$4)

1 error
    at com.google.inject.internal.Errors.throwCreationExceptionIfErrorsExist(Errors.java:543)
    at com.google.inject.internal.InternalInjectorCreator.initializeStatically(InternalInjectorCreator.java:159)
    at com.google.inject.internal.InternalInjectorCreator.build(InternalInjectorCreator.java:106)
    at com.google.inject.Guice.createInjector(Guice.java:87)
    at com.google.inject.Guice.createInjector(Guice.java:78)
    at play.api.inject.guice.GuiceBuilder.injector(GuiceInjectorBuilder.scala:186)
    at play.api.inject.guice.GuiceApplicationBuilder.build(GuiceApplicationBuilder.scala:139)
    at play.api.inject.guice.GuiceApplicationLoader.load(GuiceApplicationLoader.scala:21)
    at play.core.server.DevServerStart$$anon$1.$anonfun$reload$3(DevServerStart.scala:176)
    at play.utils.Threads$.withContextClassLoader(Threads.scala:22)
</code></pre>
</div>
</section><section id="di-with-guice-9" class="slide level2">
<h2>DI with Guice</h2>
<p>A mistake: two matches</p>
</section><section id="di-with-guice-10" class="slide level2" data-state="page-bad">
<h2>DI with Guice</h2>
<p><br/></p>
<pre><code class="java" data-trim data-line-numbers>
public class INeedSomething {
    @Inject
    public INeedSomething(Something needed) { ... }
}

public class Module extends AbstractModule {
    public void configure() {
        bind(Something.class).toInstance(...);
        bind(Something.class).toInstance(...);
    }
}
</code></pre>
</section><section id="di-with-guice-11" class="slide level2" data-state="page-bad">
<h2>DI with Guice</h2>
<p><br/></p>
<pre><code class="java" data-trim data-line-numbers="8-9">
public class INeedSomething {
    @Inject
    public INeedSomething(Something needed) { ... }
}

public class Module extends AbstractModule {
    public void configure() {
        bind(Something.class).toInstance(...);
        bind(Something.class).toInstance(...);
    }
}
</code></pre>
</section><section id="di-with-guice-12" class="slide level2" data-state="page-bad">
<h2>DI with Guice</h2>
<p><br/></p>
<div class="stacktrace">
<pre><code class="xml" data-trim data-line-numbers>
com.google.inject.CreationException: Unable to create injector, see the following errors:

1) A binding to Something was already configured at Module.configure(Module.java:29) (via modules: com.google.inject.util.Modules$OverrideModule -> Module).
  at Module.configure(Module.java:30) (via modules: com.google.inject.util.Modules$OverrideModule -> Module)

1 error
    at com.google.inject.internal.Errors.throwCreationExceptionIfErrorsExist(Errors.java:543)
    at com.google.inject.internal.InternalInjectorCreator.initializeStatically(InternalInjectorCreator.java:159)
    at com.google.inject.internal.InternalInjectorCreator.build(InternalInjectorCreator.java:106)
    at com.google.inject.Guice.createInjector(Guice.java:87)
    at com.google.inject.Guice.createInjector(Guice.java:78)
    at play.api.inject.guice.GuiceBuilder.injector(GuiceInjectorBuilder.scala:186)
    at play.api.inject.guice.GuiceApplicationBuilder.build(GuiceApplicationBuilder.scala:139)
    at play.api.inject.guice.GuiceApplicationLoader.load(GuiceApplicationLoader.scala:21)
    at play.core.server.DevServerStart$$anon$1.$anonfun$reload$3(DevServerStart.scala:176)
    at play.utils.Threads$.withContextClassLoader(Threads.scala:22)
</code></pre>
</div>
</section><section id="di-with-guice-13" class="slide level2" data-state="page-bad">
<h2>DI with Guice</h2>
<p><br/></p>
<div class="stacktrace">
<pre><code class="xml" data-trim data-line-numbers="3-4">
com.google.inject.CreationException: Unable to create injector, see the following errors:

1) A binding to Something was already configured at Module.configure(Module.java:29) (via modules: com.google.inject.util.Modules$OverrideModule -> Module).
  at Module.configure(Module.java:30) (via modules: com.google.inject.util.Modules$OverrideModule -> Module)

1 error
    at com.google.inject.internal.Errors.throwCreationExceptionIfErrorsExist(Errors.java:543)
    at com.google.inject.internal.InternalInjectorCreator.initializeStatically(InternalInjectorCreator.java:159)
    at com.google.inject.internal.InternalInjectorCreator.build(InternalInjectorCreator.java:106)
    at com.google.inject.Guice.createInjector(Guice.java:87)
    at com.google.inject.Guice.createInjector(Guice.java:78)
    at play.api.inject.guice.GuiceBuilder.injector(GuiceInjectorBuilder.scala:186)
    at play.api.inject.guice.GuiceApplicationBuilder.build(GuiceApplicationBuilder.scala:139)
    at play.api.inject.guice.GuiceApplicationLoader.load(GuiceApplicationLoader.scala:21)
    at play.core.server.DevServerStart$$anon$1.$anonfun$reload$3(DevServerStart.scala:176)
    at play.utils.Threads$.withContextClassLoader(Threads.scala:22)
</code></pre>
</div>
</section><section id="di-with-spring-28" class="slide level2">
<h2>DI with Spring</h2>
<p>A mistake: cyclic dependencies</p>
<div class="fragment">
<p><br/></p>
<p><strong>Probably</strong> possible?</p>
</div>
</section><section id="parallel-java-11" class="slide level2">
<h2>Parallel Java</h2>
<p><br/></p>
<p>Manual DI</p>
</section><section id="manual-di" class="slide level2" data-state="page-good">
<h2>Manual DI</h2>
<p><br/></p>
<pre><code class="java" data-trim data-line-numbers>
public class INeedSomething {
    public INeedSomething(Something needed) { ... }
}

public class Main {
    public static void main(String... args) {
        Something needed = ...;
        INeedSomething iNeedSomething =
            new INeedSomething(needed);
    }
}
</code></pre>
</section><section id="manual-di-1" class="slide level2" data-state="page-good">
<h2>Manual DI</h2>
<p><br/></p>
<pre><code class="java" data-trim data-line-numbers="2">
public class INeedSomething {
    public INeedSomething(Something needed) { ... }
}

public class Main {
    public static void main(String... args) {
        Something needed = ...;
        INeedSomething iNeedSomething =
            new INeedSomething(needed);
    }
}
</code></pre>
</section><section id="manual-di-2" class="slide level2" data-state="page-good">
<h2>Manual DI</h2>
<p><br/></p>
<pre><code class="java" data-trim data-line-numbers="7-9">
public class INeedSomething {
    public INeedSomething(Something needed) { ... }
}

public class Main {
    public static void main(String... args) {
        Something needed = ...;
        INeedSomething iNeedSomething =
            new INeedSomething(needed);
    }
}
</code></pre>
</section><section id="manual-di-3" class="slide level2" data-state="page-good">
<h2>Manual DI</h2>
<p><br/></p>
<pre><code class="java" data-trim data-line-numbers="6,10">
public class INeedSomething {
    public INeedSomething(Something needed) { ... }
}

public class Main {
    public static void main(String... args) {
        Something needed = ...;
        INeedSomething iNeedSomething =
            new INeedSomething(needed);
    }
}
</code></pre>
</section><section id="manual-di-4" class="slide level2">
<h2>Manual DI</h2>
<p>A mistake: no matches</p>
</section><section id="manual-di-5" class="slide level2" data-state="page-good">
<h2>Manual DI</h2>
<p><br/></p>
<pre><code class="java" data-trim data-line-numbers>
public class INeedSomething {
    public INeedSomething(Something needed) { ... }
}

public class Main {
    public static void main(String... args) {
        // Something needed = ...;
        INeedSomething iNeedSomething =
            new INeedSomething(needed);
    }
}
</code></pre>
</section><section id="manual-di-6" class="slide level2" data-state="page-good">
<h2>Manual DI</h2>
<p><br/></p>
<pre><code class="java" data-trim data-line-numbers="7-9">
public class INeedSomething {
    public INeedSomething(Something needed) { ... }
}

public class Main {
    public static void main(String... args) {
        // Something needed = ...;
        INeedSomething iNeedSomething =
            new INeedSomething(needed);
    }
}
</code></pre>
</section><section id="manual-di-7" class="slide level2" data-state="page-good">
<h2>Manual DI</h2>
<p><br/></p>
<pre><code class="xml" data-trim data-line-numbers>
[ERROR] COMPILATION ERROR :
[ERROR] [...]/Main.java:[34,82] cannot find symbol
  symbol:   variable needed
  location: class nl.jqno.paralleljava.Main
</code></pre>
</section><section id="manual-di-8" class="slide level2">
<h2>Manual DI</h2>
<p>A mistake: two matches</p>
</section><section id="manual-di-9" class="slide level2" data-state="page-good">
<h2>Manual DI</h2>
<p><br/></p>
<pre><code class="java" data-trim data-line-numbers>
public class INeedSomething {
    public INeedSomething(Something needed) { ... }
}

public class Main {
    public static void main(String... args) {
        Something needed = ...;
        Something somethingElse = ...;
        INeedSomething iNeedSomething =
            new INeedSomething(???);
    }
}
</code></pre>
</section><section id="manual-di-10" class="slide level2" data-state="page-good">
<h2>Manual DI</h2>
<p><br/></p>
<pre><code class="java" data-trim data-line-numbers="7-10">
public class INeedSomething {
    public INeedSomething(Something needed) { ... }
}

public class Main {
    public static void main(String... args) {
        Something needed = ...;
        Something somethingElse = ...;
        INeedSomething iNeedSomething =
            new INeedSomething(???);
    }
}
</code></pre>
</section><section id="manual-di-11" class="slide level2">
<h2>Manual DI</h2>
<p>A mistake: cyclic dependencies</p>
</section><section id="manual-di-12" class="slide level2">
<h2>Manual DI</h2>
<p><br/></p>
<pre><code class="java" data-trim data-line-numbers>
public class Something {
    public Something(SomethingElse needed) { ... }
}

public class SomethingElse {
    public SomethingElse(Something needed) { ... }
}

public class Main {
    public static void main(String... args) {
        Something s = new Something(...);
        SomethingElse se = new SomethingElse(s);
    }
}
</code></pre>
</section><section id="manual-di-13" class="slide level2">
<h2>Manual DI</h2>
<p><br/></p>
<pre><code class="java" data-trim data-line-numbers="2,6">
public class Something {
    public Something(SomethingElse needed) { ... }
}

public class SomethingElse {
    public SomethingElse(Something needed) { ... }
}

public class Main {
    public static void main(String... args) {
        Something s = new Something(...);
        SomethingElse se = new SomethingElse(s);
    }
}
</code></pre>
</section><section id="manual-di-14" class="slide level2">
<h2>Manual DI</h2>
<p><br/></p>
<pre><code class="java" data-trim data-line-numbers="11-12">
public class Something {
    public Something(SomethingElse needed) { ... }
}

public class SomethingElse {
    public SomethingElse(Something needed) { ... }
}

public class Main {
    public static void main(String... args) {
        Something s = new Something(...);
        SomethingElse se = new SomethingElse(s);
    }
}
</code></pre>
</section><section id="manual-di-15" class="slide level2">
<h2>Manual DI</h2>
<p><br/></p>
<pre><code class="java" data-trim data-line-numbers="11-12">
public class Something {
    public Something(SomethingElse needed) { ... }
}

public class SomethingElse {
    public SomethingElse(Something needed) { ... }
}

public class Main {
    public static void main(String... args) {
        SomethingElse se = new SomethingElse(...);
        Something s = new Something(se);
    }
}
</code></pre>
</section><section id="manual-di-16" class="slide level2">
<h2>Manual DI</h2>
<p><br/></p>
<p>Illegal states are</p>
<div class="superbig">
<p><strong>unrepresentable</strong></p>
</div>
</section><section id="pros-cons-3" class="slide level2">
<h2>Pros &amp; Cons</h2>
<ul>
<li><strong>Con</strong> some boilerplate</li>
<li><strong>Con</strong> one dirty class</li>
</ul>
</section><section id="pros-cons-4" class="slide level2">
<h2>Pros &amp; Cons</h2>
<ul>
<li><strong>Con</strong> some boilerplate</li>
<li><strong>Con</strong> one dirty class</li>
</ul>
<p>over Spring and Guice</p>
<ul>
<li><strong>Pro</strong> illegal states unrepresentable</li>
<li><strong>Pro</strong> problems found at compile time</li>
</ul>
</section><section id="pros-cons-5" class="slide level2">
<h2>Pros &amp; Cons</h2>
<ul>
<li><strong>Con</strong> some boilerplate</li>
<li><strong>Con</strong> one dirty class</li>
</ul>
<p>over Spring</p>
<ul>
<li><strong>Pro</strong> illegal states unrepresentable</li>
<li><strong>Pro</strong> problems found at compile time</li>
<li><strong>Pro</strong> clear architectural boundaries</li>
<li><strong>Pro</strong> boots much faster</li>
</ul>
</section><section id="pros-cons-6" class="slide level2">
<h2>Pros &amp; Cons</h2>
<ul>
<li><strong>Con</strong> some boilerplate</li>
</ul>
</section><section id="pros-cons-7" class="slide level2">
<h2>Pros &amp; Cons</h2>
<ul>
<li><strong>Pro</strong> some boilerplate</li>
</ul>
</section><section id="pros-cons-8" class="slide level2">
<h2>Pros &amp; Cons</h2>
<ul>
<li><strong>Pro</strong> some boilerplate</li>
</ul>
<p><br/></p>
<ul>
<li>Everything is <strong>explicit</strong></li>
<li>Everything is <strong>in the same place</strong></li>
</ul>
</section><section id="pros-cons-9" class="slide level2">
<h2>Pros &amp; Cons</h2>
<ul>
<li><strong>Pro</strong> some boilerplate</li>
</ul>
<p><br/></p>
<p>Helps <strong>discovering</strong> a new project</p>
</section><section id="pros-cons-10" class="slide level2">
<h2>Pros &amp; Cons</h2>
<ul>
<li><strong>Pro</strong> some boilerplate</li>
</ul>
<p><br/></p>
<p>Helps when things get <strong>complicated</strong></p>
</section></section>
<section><section id="other-annotations" class="title-slide slide level1" data-state="page-title"><h1>Other annotations</h1></section><section id="serialization" class="slide level2" data-state="page-bad">
<h2>Serialization</h2>
<ul>
<li>JSON</li>
<li>XML</li>
</ul>
</section><section id="properties" class="slide level2" data-state="page-bad">
<h2>Properties</h2>
<ul>
<li><code>@Value</code></li>
<li><code>@ConfigurationProperties</code></li>
</ul>
</section><section id="code-generation" class="slide level2" data-state="page-bad">
<h2>Code generation</h2>
<ul>
<li>Lombok</li>
<li>AutoValue</li>
</ul>
</section><section id="are-all-annotations-bad" class="slide level2">
<h2>Are <strong>all</strong> annotations bad?</h2>
</section><section id="static-analysis" class="slide level2" data-state="page-good">
<h2>Static analysis</h2>
<ul>
<li><code>@NonNull</code></li>
<li><code>@Immutable</code></li>
</ul>
</section><section id="code-meta-data" class="slide level2" data-state="page-good">
<h2>Code meta-data</h2>
<ul>
<li><code>@SuppressWarnings</code></li>
<li><code>@Deprecated</code></li>
</ul>
</section><section id="should-have-been-built-in" class="slide level2" data-state="page-good">
<h2>Should have been built-in</h2>
<ul>
<li><code>@Override</code></li>
</ul>
</section><section id="conclusion" class="slide level2">
<h2>Conclusion</h2>
<ul>
<li>Do something <strong>useful</strong></li>
<li>Can’t <strong>reasonably</strong> be done differently</li>
</ul>
</section></section>
<section><section id="parallel-java-12" class="title-slide slide level1" data-state="page-title"><h1>Parallel Java</h1></section><section id="yeah-right" class="slide level2">
<h2>Yeah right</h2>
</section><section class="slide level2">

<p><br/><br/></p>
<div class="superbig">
<p>It’s all <strong>real</strong></p>
</div>
</section><section id="todobackend.com" class="slide level2">
<h2>TodoBackend.com</h2>
<p><img data-src="../images/todobackend.png" /></p>
</section><section id="todobackend.com-1" class="slide level2">
<h2>TodoBackend.com</h2>
<p><strong>fully compliant</strong></p>
<p><img data-src="../images/todobackend-compliance.png" /></p>
</section><section id="some-code" class="slide level2">
<h2>Some code</h2>
</section><section id="some-code-1" class="slide level2" data-state="page-good">
<h2>Some code</h2>
<pre><code class="yml" data-trim data-line-numbers>
modelVersion: 4.0.0
groupId: nl.jqno.paralleljava
artifactId: parallel-java
version: 1.0
packaging: jar
name: parallel-java

properties: {
  encoding: utf-8,
  maven.compiler.source: 11,
  maven.compiler.target: 11
}

dependencies:
  - { groupId: com.sparkjava, artifactId: spark-core, version: 2.7.2 }
  - { groupId: com.google.code.gson, artifactId: gson, version: 2.8.5 }
  - { groupId: org.jdbi, artifactId: jdbi3-core }
  - { groupId: org.postgresql, artifactId: postgresql, version: 42.2.5 }
</code></pre>
</section><section id="some-code-2" class="slide level2" data-state="page-good">
<h2>Some code</h2>
<pre><code class="yml" data-trim data-line-numbers="10-11">
modelVersion: 4.0.0
groupId: nl.jqno.paralleljava
artifactId: parallel-java
version: 1.0
packaging: jar
name: parallel-java

properties: {
  encoding: utf-8,
  maven.compiler.source: 11,
  maven.compiler.target: 11
}

dependencies:
  - { groupId: com.sparkjava, artifactId: spark-core, version: 2.7.2 }
  - { groupId: com.google.code.gson, artifactId: gson, version: 2.8.5 }
  - { groupId: org.jdbi, artifactId: jdbi3-core }
  - { groupId: org.postgresql, artifactId: postgresql, version: 42.2.5 }
</code></pre>
</section><section id="some-code-3" class="slide level2" data-state="page-good">
<h2>Some code</h2>
<pre><code class="xml" data-trim data-line-numbers>
&lt;module name = "Checker">
    &lt;property name="charset" value="UTF-8"/>
    &lt;property name="severity" value="error"/>

    &lt;module name="TreeWalker">
        &lt;module name="Regexp">
            &lt;property name="format" value="@"/>
            &lt;property name="illegalPattern" value="true"/>
            &lt;property name="ignoreComments" value="true"/>
            &lt;property name="message" value="Annotations are not allowed!"/>
        &lt;/module>
    &lt;/module>
&lt;/module>
</code></pre>
</section><section id="some-code-4" class="slide level2" data-state="page-good">
<h2>Some code</h2>
<pre><code class="xml" data-trim data-line-numbers="7">
&lt;module name = "Checker">
    &lt;property name="charset" value="UTF-8"/>
    &lt;property name="severity" value="error"/>

    &lt;module name="TreeWalker">
        &lt;module name="Regexp">
            &lt;property name="format" value="@"/>
            &lt;property name="illegalPattern" value="true"/>
            &lt;property name="ignoreComments" value="true"/>
            &lt;property name="message" value="Annotations are not allowed!"/>
        &lt;/module>
    &lt;/module>
&lt;/module>
</code></pre>
</section><section id="some-code-5" class="slide level2" data-state="page-good">
<h2>Some code</h2>
<pre><code class="xml" data-trim data-line-numbers="3">
&lt;module name = "Checker">
    &lt;property name="charset" value="UTF-8"/>
    &lt;property name="severity" value="error"/>

    &lt;module name="TreeWalker">
        &lt;module name="Regexp">
            &lt;property name="format" value="@"/>
            &lt;property name="illegalPattern" value="true"/>
            &lt;property name="ignoreComments" value="true"/>
            &lt;property name="message" value="Annotations are not allowed!"/>
        &lt;/module>
    &lt;/module>
&lt;/module>
</code></pre>
</section><section id="some-code-6" class="slide level2" data-state="page-good">
<h2>Some code</h2>
<pre><code class="xml" data-trim data-line-numbers="10">
&lt;module name = "Checker">
    &lt;property name="charset" value="UTF-8"/>
    &lt;property name="severity" value="error"/>

    &lt;module name="TreeWalker">
        &lt;module name="Regexp">
            &lt;property name="format" value="@"/>
            &lt;property name="illegalPattern" value="true"/>
            &lt;property name="ignoreComments" value="true"/>
            &lt;property name="message" value="Annotations are not allowed!"/>
        &lt;/module>
    &lt;/module>
&lt;/module>
</code></pre>
</section><section id="some-code-7" class="slide level2" data-state="page-good">
<h2>Some code</h2>
<pre><code class="java" data-trim data-line-numbers>
public void architecture() {
    test("only SparkServer and SparkServerTest access Spark classes", () -> {
        assertBoundary("spark..", SparkServer.class.getPackage());
    });

    test("only DatabaseRepository accesses Engine classes", () -> {
        assertBoundary("org.jdbi..", DatabaseRepository.class.getPackage());
    });
}
</code></pre>
</section><section id="some-code-8" class="slide level2" data-state="page-good">
<h2>Some code</h2>
<pre><code class="java" data-trim data-line-numbers>
public void run() {
    port(port);
    enableCors();

    get(endpoint, (req, resp) -> controller.get());
    get(endpoint + "/:id", (req, resp) -> controller.get(req.params("id")));
    post(endpoint, (req, resp) -> controller.post(req.body()));
}
</code></pre>
</section><section id="some-code-9" class="slide level2" data-state="page-good">
<h2>Some code</h2>
<pre><code class="java" data-trim data-line-numbers>
public Try&lt;Void> create(Todo todo) {
    return engine.execute(handle -> {
        String sql = "INSERT INTO todo (id, title, completed, index)" +
            "VALUES (:id, :title, :completed, :order)";
        return handle.createUpdate(sql)
            .bind("id", todo.id().toString())
            .bind("title", todo.title())
            .bind("completed", todo.completed())
            .bind("order", todo.order())
            .execute());
    }
}
</code></pre>
</section><section id="some-code-10" class="slide level2" data-state="page-good">
<h2>Some code</h2>
<pre><code class="java" data-trim data-line-numbers>
public class Main {
    public static void main(String... args) {
        LoggerFactory loggerFactory =
                c -> new Slf4jLogger(org.slf4j.LoggerFactory.getLogger(c));

        // ...

        var todoMapper = new TodoMapper(fullUrl);
        var dbEngine = new JdbiEngine(jdbcUrl, todoMapper, loggerFactory);
        var repository = new DatabaseRepository(dbEngine);

        var idGenerator = new RandomIdGenerator();
        var serializer = GsonSerializer.create(loggerFactory);
        var controller = new DefaultController(fullUrl, repository, idGenerator, serializer, loggerFactory);
        var server = new SparkServer(Environment.ENDPOINT, port, controller, loggerFactory);

        var runner = new Runner(repository, server, loggerFactory);
        runner.startup();
    }
}
</code></pre>
</section><section id="libraries-used" class="slide level2">
<h2>Libraries used</h2>
<ul>
<li><a href="http://sparkjava.com/">SparkJava</a></li>
<li><a href="http://jdbi.org/">JDBI</a></li>
<li><a href="https://github.com/jqno/PicoTest">PicoTest</a></li>
</ul>
</section><section id="picotest" class="slide level2">
<h2>PicoTest</h2>
<div class="preload-background-images">
<p><img data-src="../images/everyonecancode.jpg" /></p>
</div>
</section><section id="picotest-1" class="slide level2" data-background="../images/everyonecancode.jpg">
<h2>PicoTest</h2>
</section><section id="code" class="slide level2">
<h2>Code</h2>
<p><br/></p>
<p><img data-src="../images/github.png" /></p>
<ul>
<li><a href="https://github.com/jqno/paralleljava">github.com/jqno/paralleljava</a></li>
<li><a href="https://github.com/jqno/picotest">github.com/jqno/picotest</a></li>
</ul>
</section></section>
<section><section id="conclusion-1" class="title-slide slide level1" data-state="page-title"><h1>Conclusion</h1></section><section id="conclusion-2" class="slide level2">
<h2>Conclusion</h2>
<p>Think about your <strong>libraries</strong></p>
<div class="fragment">
<p><br/></p>
<p>Do you really need them?</p>
<p>Are they good citizens?</p>
</div>
</section><section id="conclusion-3" class="slide level2">
<h2>Conclusion</h2>
<p>Think about your <strong>frameworks</strong></p>
<div class="fragment">
<p><br/></p>
<p>Will they infect your architecture?</p>
<p>Are there alternatives?</p>
<div class="supersmall">
<p>(<a href="https://spring.io/blog/2016/09/22/new-in-spring-5-functional-web-framework">Spring Functional Web Framework</a>)</p>
</div>
</div>
</section><section id="conclusion-4" class="slide level2">
<h2>Conclusion</h2>
<p>Think about your <strong>languages</strong></p>
<div class="fragment">
<p>Language of the Year</p>
</div>
</section><section id="conclusion-5" class="slide level2">
<h2>Conclusion</h2>
<p>Think about your <strong>languages</strong></p>
<p>Language of the Year</p>
<p><strong>Scala</strong></p>
</section><section id="conclusion-6" class="slide level2">
<h2>Conclusion</h2>
<p>Think about your <strong>languages</strong></p>
<p>Language of the Year</p>
<p><strong>Kotlin</strong></p>
</section><section id="conclusion-7" class="slide level2">
<h2>Conclusion</h2>
<p>Think about your <strong>languages</strong></p>
<p>Language of the Year</p>
<div class="superbig">
<p><strong>Parallel Java</strong></p>
</div>
</section><section id="conclusion-8" class="slide level2">
<h2>Conclusion</h2>
<div class="superbig">
<p><strong>fun</strong></p>
</div>
<div class="preload-background-images">
<p><img data-src="../images/mill.jpg" /></p>
</div>
</section><section id="conclusion-9" class="slide level2" data-background="../images/mill.jpg">
<h2>Conclusion</h2>
<p>Keep fighting those windmills!</p>
</section><section id="conclusion-10" class="slide level2">
<h2>Conclusion</h2>
<p><img data-src="../images/don-quixote-1.jpg" height="400" /></p>
<p>And read a <strong>good book</strong>!</p>
</section></section>
<section id="section-6" class="title-slide slide level1" data-background-image="../images/jfall2019-background.png"><h1></h1><div style="float:left;font-family:TilburgSans">
<p><img data-src="../images/jfall2019-logo.png" style="height:200px;" /> <br/> #jfall <br/> #paralleljava</p>
</div>
<div style="font-family:TilburgSans;font-size:2.2em;">
<p>Please rate my talk in the official J-Fall app!</p>
</div></section>
<section id="questions" class="title-slide slide level1" data-state="page-title"><h1>Questions?</h1><p><br/></p>
<p><img data-src="../images/qr.png" /></p>
<p><a href="http://jqno.nl/talks/paralleljava">jqno.nl/talks/paralleljava</a></p>
<div style="font-family:TilburgsAns;">
<p><img data-src="../images/twitter-dark.png" height="30" /> #paralleljava</p>
</div>
<div style="font-size:0.3em;">
<p>Photo credits: <a href="https://unsplash.com/photos/y_dCjaRWthY">freestocks.org</a>, <a href="https://unsplash.com/photos/Ismnr6WSHCU">Mitch Lensink</a> and <a href="https://unsplash.com/photos/mDinBvq1Sfg">Adi Goldstein</a> on <a href="https://unsplash.com">Unsplash</a>; <a href="https://pixabay.com/photos/mill-wind-grind-tourist-tourism-1745186/">Unknown</a> on <a href="https://pixabay.com">Pixabay</a>; and <a href="https://www.wikiart.org/en/gustave-dore/all-works#!#filterName:Series_don-quixote,resultType:detailed">Gustave Doré</a></p>
</div></section>
    </div>
  </div>

  <script src="../../-revealjs-3.8.0/lib/js/head.min.js"></script>
  <script src="../../-revealjs-3.8.0/js/reveal.js"></script>

  <script>

      // Full list of configuration options available at:
      // https://github.com/hakimel/reveal.js#configuration
      Reveal.initialize({
        // Display controls in the bottom right corner
        controls: false,
        // Display a presentation progress bar
        progress: false,
        // Push each slide change to the browser history
        history: true,
        // Enable keyboard shortcuts for navigation
        keyboard: {39:'next',37:'prev'},
        // Vertical centering of slides
        center: false,
        // Transition style
        transition: 'none', // none/fade/slide/convex/concave/zoom
        // Transition style for full page slide backgrounds
        backgroundTransition: 'none', // none/fade/slide/convex/concave/zoom

        // Optional reveal.js plugins
        dependencies: [
          { src: '../../-revealjs-3.8.0/lib/js/classList.js', condition: function() { return !document.body.classList; } },
          { src: '../../-revealjs-3.8.0/plugin/zoom-js/zoom.js', async: true },
          { src: '../../-revealjs-3.8.0/plugin/highlight/highlight.js', async: true },
          { src: '../../-revealjs-3.8.0/plugin/notes/notes.js', async: true }
        ]
      });
    </script>
    </body>
</html>

